# my-webview-app/.github/workflows/android.yml 
name: тЬЕ Android APK Build (Fixed) 
on: 
  push: 
    branches: [ main ] # рдЬрдм main branch рдкрд░ push рд╣реЛ 
  pull_request: 
    branches: [ main ] # рдЬрдм main branch рдкрд░ pull request рд╣реЛ 
  workflow_dispatch: # рдореИрдиреНрдпреБрдЕрд▓ рд░реВрдк рд╕реЗ рднреА рдЪрд▓рд╛ рд╕рдХрддреЗ рд╣реИрдВ (GitHub UI рд╕реЗ) 
 
jobs: 
  build: 
    runs-on: ubuntu-latest # GitHub рджреНрд╡рд╛рд░рд╛ рдкреНрд░рджрд╛рди рдХрд┐рдпрд╛ рдЧрдпрд╛ рд╡рд░реНрдЪреБрдЕрд▓ Linux рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ 
         
    steps: 
    - name: ЁЯУе Checkout Code 
      uses: actions/checkout@v4 # GitHub рд░рд┐рдкреЙрдЬрд┐рдЯрд░реА рд╕реЗ рдХреЛрдб рдЪреЗрдХрдЖрдЙрдЯ рдХрд░реЗрдВ 
           
    - name: тШХ Java 17 Setup 
      uses: actions/setup-java@v4 # Java 17 рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ 
      with: 
        java-version: '17' 
        distribution: 'temurin' # Java рдХрд╛ рд╡рд┐рддрд░рдг (рдУрдкрдирд╕реЛрд░реНрд╕) 
             
    - name: ЁЯЧДя╕П Gradle Wrapper Setup 
      run: | 
        chmod +x gradlew # repo рдореЗрдВ рдореМрдЬреВрдж gradlew рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдХреЛ рдПрдХреНрдЬреАрдХреНрдпреВрдЯреЗрдмрд▓ рдмрдирд╛рдПрдВ 
        # рдпрд╣ рдХрдорд╛рдВрдб gradlew рд╕реНрдХреНрд░рд┐рдкреНрдЯ рдФрд░ jar рдХреЛ рдЬрдирд░реЗрдЯ рдпрд╛ рд╡реЗрд░реАрдлрд╛рдИ рдХрд░рддрд╛ рд╣реИ 
        ./gradlew wrapper --gradle-version 8.6 --distribution-type bin 
             
    - name: ЁЯУ▒ Android SDK Setup 
      uses: android-actions/setup-android@v3 # Android SDK рдПрдирд╡рд╛рдпрд░рдирдореЗрдВрдЯ рд╕реЗрдЯ рдХрд░реЗрдВ 
           
    - name: тЬЕ Accept SDK Licenses 
      run: yes | sdkmanager --licenses # Android SDK рд▓рд╛рдЗрд╕реЗрдВрд╕ рд╕реНрд╡реАрдХрд╛рд░ рдХрд░реЗрдВ 
           
    - name: ЁЯФз Install SDK 34 
      run: sdkmanager "platforms;android-34" "build-tools;34.0.0" # рд╡рд┐рд╢рд┐рд╖реНрдЯ SDK 34 рдФрд░ рдмрд┐рд▓реНрдб рдЯреВрд▓реНрд╕ рдЗрдВрд╕реНрдЯреЙрд▓ рдХрд░реЗрдВ 
           
    - name: ЁЯЪА Build Debug APK 
      run: ./gradlew assembleDebug --stacktrace # Gradle рдХрдорд╛рдВрдб рдЪрд▓рд╛рдХрд░ debug APK рдмрдирд╛рдПрдВ 
           
    - name: ЁЯУд Upload APK 
      uses: actions/upload-artifact@v4 # рдмрдирд╛рдП рдЧрдП APK рдХреЛ рдПрдХ GitHub Artifact рдХреЗ рд░реВрдк рдореЗрдВ рдЕрдкрд▓реЛрдб рдХрд░реЗрдВ 
      with: 
        name: app-debug.apk # Artifact рдХрд╛ рдирд╛рдо 
        path: app/build/outputs/apk/debug/app-debug.apk # APK рдХрд╛ рдкрд╛рде 

